# 不動産営業支援システム 仕様書

## 1. システム概要

### 1.1 システム名
**不動産営業支援システム（Real Estate Sales Support System）**

### 1.2 システム目的
不動産売買を行う会社の営業効率を向上させるため、物件情報と顧客情報を一元管理し、最適なマッチングを提供する社内ツールです。従来のスプレッドシート管理からの脱却を図り、営業活動の可視化と効率化を実現します。

### 1.3 対象ユーザー
- **営業担当者**: 物件・顧客情報の登録・管理、マッチング結果の確認
- **営業管理者**: 全体の進捗管理、統計分析、アカウント管理
- **システム管理者**: システム設定、ユーザー管理

### 1.4 システム構成
- **フロントエンド**: React + TypeScript + Material-UI
- **バックエンド**: Laravel 12 (PHP 8.2+)
- **データベース**: MySQL 8.0+
- **インフラ**: Docker環境での開発・運用

## 2. 機能要件

### 2.1 ダッシュボード機能

#### 2.1.1 概要画面
- **目的**: システム全体の状況を一目で把握
- **表示内容**:
  - 登録物件数（ステータス別）
  - 登録顧客数（ステータス別）
  - 今月のマッチング件数
  - 成約件数・成約率
  - 担当者別パフォーマンス
  - 最近の活動履歴

#### 2.1.2 統計グラフ
- 月別売上推移
- 物件種別別成約率
- エリア別人気度
- 営業担当者別成績

#### 2.1.3 アラート機能
- 長期未接触顧客の通知
- 価格変更が必要な物件の提案
- 契約期限が近い案件の警告

### 2.2 物件管理機能

#### 2.2.1 物件一覧表示
- **検索・フィルタ機能**:
  - 物件種別（店舗、レジ、土地、事務所、区分、一棟ビル、十地、新築ホテル）
  - エリア（都道府県、市区町村）
  - 価格帯（下限・上限）
  - 利回り範囲
  - 登録日期間
  - ステータス（販売中、商談中、成約済み、一時停止）

- **ソート機能**:
  - 価格（昇順・降順）
  - 利回り（昇順・降順）
  - 登録日（新着順・古い順）
  - 坪単価（昇順・降順）

- **一覧表示項目**:
  - 物件名
  - 種別
  - 所在地
  - 価格
  - 利回り
  - 担当者
  - ステータス
  - 最終更新日

#### 2.2.2 物件詳細画面
- **基本情報表示**:
  - 物件名、種別、担当者名
  - 登録日、住所
  - 情報取得先、取引区分
  - 地積、建物面積
  - 構造階数、築年
  - 価格、坪単価、利回り
  - 最寄り駅、徒歩分数
  - 備考

- **画像管理**:
  - 複数画像のアップロード
  - 画像種別の分類（外観、内観、間取り、その他）
  - 画像の並び替え機能
  - サムネイル表示

- **マッチング情報**:
  - この物件にマッチする顧客一覧
  - マッチングスコア表示
  - 提案状況・結果

#### 2.2.3 物件登録・編集
- **入力フォーム**:
  - 必須項目の入力チェック
  - データ形式の検証
  - 重複チェック機能

- **一括登録機能**:
  - CSVファイルからの一括インポート
  - エラーチェック・修正機能

#### 2.2.4 物件ステータス管理
- ステータス変更履歴の記録
- 変更理由の入力
- 関連する顧客への自動通知

### 2.3 顧客管理機能

#### 2.3.1 顧客一覧表示
- **検索・フィルタ機能**:
  - 顧客属性（法人、個人、自社等）
  - 予算帯
  - 希望エリア
  - 希望物件種別
  - 担当営業者
  - ステータス（アクティブ、商談中、成約、休眠）
  - 優先度（高、中、低）

- **一覧表示項目**:
  - 顧客名
  - 顧客属性
  - 予算帯
  - 希望エリア
  - 担当者
  - 最終接触日
  - 次回接触予定
  - ステータス

#### 2.3.2 顧客詳細画面
- **基本情報**:
  - 顧客名、属性
  - 連絡先情報（電話、メール、住所）
  - 担当営業者
  - 優先度、ステータス

- **購買条件**:
  - 希望エリア
  - 希望物件種別
  - 予算範囲
  - 利回り要求
  - 詳細要望

- **活動履歴**:
  - 接触履歴
  - 提案履歴
  - 商談進捗
  - メモ・コメント

- **マッチング情報**:
  - 条件に合う物件一覧
  - 提案済み物件
  - 検討状況

#### 2.3.3 顧客登録・編集
- **基本情報入力**
- **詳細条件設定**:
  - 複数条件の組み合わせ
  - 優先度付け
  - 条件の重み設定

#### 2.3.4 活動管理
- **接触履歴の記録**:
  - 日時、方法（電話、メール、面談）
  - 内容、結果
  - 次回アクション

- **リマインダー機能**:
  - 次回接触予定の通知
  - 長期未接触の警告

### 2.4 マッチング機能

#### 2.4.1 自動マッチング
- **マッチング条件**:
  - 価格条件（予算範囲内）
  - エリア条件（希望地域）
  - 物件種別条件
  - 利回り条件
  - その他詳細条件

- **マッチングスコア計算**:
  - 各条件の適合度を数値化
  - 重み付けによる総合スコア
  - スコアに基づく優先順位付け

#### 2.4.2 マッチング結果表示
- **一覧表示**:
  - 物件×顧客のマッチング組み合わせ
  - マッチングスコア
  - マッチング理由
  - 提案状況

- **詳細表示**:
  - 物件詳細と顧客条件の対比
  - 適合項目・非適合項目の明示
  - 提案時のポイント提示

#### 2.4.3 提案管理
- **提案作成**:
  - 物件資料の自動生成
  - カスタマイズ可能な提案書
  - メール送信機能

- **進捗管理**:
  - 提案日の記録
  - 顧客の反応・コメント
  - 商談ステータスの更新

### 2.5 アカウント管理機能（管理者限定）

#### 2.5.1 ユーザー管理
- **ユーザー一覧**:
  - 氏名、メール、部署
  - 権限レベル
  - 最終ログイン日
  - アクティブ状態

- **ユーザー登録・編集**:
  - 基本情報設定
  - 権限設定（管理者/営業）
  - パスワード管理

#### 2.5.2 権限管理
- **ロールベース制御**:
  - 管理者: 全機能アクセス可能
  - 営業: 担当案件のみアクセス可能

- **データアクセス制御**:
  - 担当者による物件・顧客の閲覧制限
  - 部署横断での情報共有設定

## 3. 非機能要件

### 3.1 パフォーマンス要件
- **レスポンス時間**:
  - 一覧表示: 2秒以内
  - 詳細表示: 1秒以内
  - 検索処理: 3秒以内

- **同時接続数**: 50ユーザーまで対応

- **データ容量**:
  - 物件データ: 10,000件まで
  - 顧客データ: 5,000件まで
  - 画像ファイル: 1GB まで

### 3.2 セキュリティ要件
- **認証**:
  - メールアドレス・パスワード認証
  - セッション管理
  - 自動ログアウト（30分間無操作）

- **データ保護**:
  - 個人情報の暗号化
  - SQLインジェクション対策
  - XSS対策

- **アクセス制御**:
  - ロールベースアクセス制御
  - 操作ログの記録

### 3.3 可用性要件
- **稼働時間**: 平日9:00-18:00（99%以上）
- **バックアップ**: 日次自動バックアップ
- **復旧時間**: 4時間以内

### 3.4 ユーザビリティ要件
- **レスポンシブデザイン**: PC・タブレット対応
- **ブラウザ対応**: Chrome、Firefox、Safari、Edge
- **操作性**: 直感的なUI、3クリック以内での主要操作完了

## 4. 画面設計

### 4.1 画面一覧
1. **ログイン画面**
2. **ダッシュボード**
3. **物件一覧画面**
4. **物件詳細画面**
5. **物件登録・編集画面**
6. **顧客一覧画面**
7. **顧客詳細画面**
8. **顧客登録・編集画面**
9. **マッチング一覧画面**
10. **マッチング詳細画面**
11. **アカウント管理画面**
12. **ユーザー設定画面**

### 4.2 共通UI要素
- **ヘッダー**: ロゴ、ナビゲーション、ユーザー情報、ログアウト
- **サイドバー**: メインメニュー、クイックアクセス
- **フッター**: 著作権、バージョン情報
- **通知エリア**: 成功・エラーメッセージ、アラート

### 4.3 Material-UI コンポーネント活用
- **データテーブル**: 一覧表示、ソート、フィルタ
- **フォーム**: 入力検証、エラー表示
- **モーダル**: 詳細表示、確認ダイアログ
- **チップ**: ステータス、タグ表示
- **プログレスバー**: 読み込み状況表示

## 5. API設計

### 5.1 認証API
```
POST /api/auth/login          # ログイン
POST /api/auth/logout         # ログアウト
GET  /api/auth/me             # 認証ユーザー情報取得
PUT  /api/auth/profile        # プロフィール更新
```

### 5.2 物件管理API
```
GET    /api/properties                    # 物件一覧取得
POST   /api/properties                    # 物件登録
GET    /api/properties/{id}               # 物件詳細取得
PUT    /api/properties/{id}               # 物件更新
DELETE /api/properties/{id}               # 物件削除
GET    /api/properties/{id}/images        # 物件画像一覧
POST   /api/properties/{id}/images        # 物件画像アップロード
DELETE /api/properties/{id}/images/{imgId} # 物件画像削除
POST   /api/properties/import             # 物件一括インポート
```

### 5.3 顧客管理API
```
GET    /api/customers                     # 顧客一覧取得
POST   /api/customers                     # 顧客登録
GET    /api/customers/{id}                # 顧客詳細取得
PUT    /api/customers/{id}                # 顧客更新
DELETE /api/customers/{id}                # 顧客削除
GET    /api/customers/{id}/preferences    # 顧客条件取得
PUT    /api/customers/{id}/preferences    # 顧客条件更新
GET    /api/customers/{id}/activities     # 顧客活動履歴取得
POST   /api/customers/{id}/activities     # 顧客活動記録
```

### 5.4 マッチングAPI
```
GET    /api/matches                       # マッチング一覧取得
POST   /api/matches/generate              # マッチング実行
GET    /api/matches/{id}                  # マッチング詳細取得
PUT    /api/matches/{id}                  # マッチング状況更新
POST   /api/matches/{id}/present          # 提案実行
PUT    /api/matches/{id}/response         # 顧客回答記録
```

### 5.5 ダッシュボードAPI
```
GET    /api/dashboard/stats               # 統計データ取得
GET    /api/dashboard/activities          # 最近の活動取得
GET    /api/dashboard/alerts              # アラート一覧取得
```

### 5.6 管理API
```
GET    /api/admin/users                   # ユーザー一覧取得
POST   /api/admin/users                   # ユーザー登録
PUT    /api/admin/users/{id}              # ユーザー更新
DELETE /api/admin/users/{id}              # ユーザー削除
GET    /api/admin/system/info             # システム情報取得
```

## 6. データフロー

### 6.1 物件登録フロー
1. 営業担当者が物件情報を入力
2. 入力データの検証・重複チェック
3. データベースへの保存
4. 自動マッチング処理の実行
5. マッチング結果の通知

### 6.2 マッチング処理フロー
1. 物件・顧客データの取得
2. 条件マッチング計算
3. スコア算出・ランキング
4. 結果の保存
5. 営業担当者への通知

### 6.3 提案フロー
1. マッチング結果から物件選択
2. 提案資料の生成
3. 顧客への提案実行
4. 進捗状況の記録
5. フォローアップの設定

## 7. 開発スケジュール

### フェーズ1（基盤構築）- 4週間
- 開発環境構築
- 認証機能実装
- 基本画面レイアウト作成

### フェーズ2（コア機能）- 6週間
- 物件管理機能
- 顧客管理機能
- 基本的なマッチング機能

### フェーズ3（高度機能）- 4週間
- ダッシュボード機能
- 高度なマッチングロジック
- レポート機能

### フェーズ4（仕上げ）- 2週間
- テスト・デバッグ
- パフォーマンス最適化
- ドキュメント整備

## 8. 運用・保守

### 8.1 定期メンテナンス
- 月次データバックアップ確認
- システムパフォーマンス監視
- セキュリティアップデート

### 8.2 ユーザーサポート
- 操作マニュアルの提供
- 問い合わせ対応体制
- 定期的な利用状況レビュー

### 8.3 継続的改善
- ユーザーフィードバックの収集
- 機能追加・改善の検討
- システム拡張の計画

## 9. リスク管理

### 9.1 技術的リスク
- **対策**: 十分な技術検証とプロトタイプ作成
- **バックアッププラン**: 代替技術の準備

### 9.2 スケジュールリスク
- **対策**: 段階的リリース、優先度に基づく機能実装
- **バックアッププラン**: 必要最小限機能での先行リリース

### 9.3 データ移行リスク
- **対策**: 段階的移行、十分なテスト期間の確保
- **バックアッププラン**: 旧システムとの並行運用期間設定 